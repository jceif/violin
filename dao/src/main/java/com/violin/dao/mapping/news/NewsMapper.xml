<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" > 
<mapper namespace="com.violin.dao.mapping.news.NewsMapper">
<resultMap id="news" type="com.violin.model.news.News">
	<result property="id" column="id"/>
	<result property="title" column="title"/>
	<result property="content" column="content"/>
	<result property="author" column="author"/>
	<result property="isShow" column="is_show"/>
	<result property="isHot" column="is_hot"/>
	<result property="sort" column="sort"/>
	<result property="publishTime" column="publish_time"/>
</resultMap>
<insert id="insertNews" parameterType="com.violin.model.news.News">
insert into news
(	id,
	title,
	content,
	author,
	is_show,
	is_hot,
	sort,
	publish_time
)values(
	#{id},
	#{title},
	#{content},
	#{author},
	#{isShow},
	#{isHot},
	#{sort},
	#{publishTime}
)
</insert>
<delete id="deleteNewsById">
	delete from news
	where id=#{id}
</delete>
<delete id="deleteNewsAll">
	delete from news
</delete>
<select id="findNewsById" resultMap="news">
	select * from news
	where id=#{id}
</select>
<select id="findNewsList" resultMap="news">
	select * from news
</select>
<update id="updateNews" parameterType="com.violin.model.news.News">
update news
<set>
	id=#{id},
	title=#{title},
	content=#{content},
	author=#{author},
	is_show=#{isShow},
	is_hot=#{isHot},
	sort=#{sort},
	publish_time=#{publishTime}
</set>
<where>	
id=#{id}	
</where>	
</update>
<delete id="deleteNewsListByIds" parameterType ="java.lang.String">
	delete from news
	where id in
	<foreach item="idItem" collection="array" open="(" separator="," close=")">#{idItem}</foreach>
</delete>
<delete id="deleteNewsList" parameterType ="com.violin.model.news.News">
	delete from news
	where id in
	<foreach collection="list" item="item" index= "index" open="(" separator="," close=")">#{item.id}</foreach>
</delete>
<insert id="insertNewsList" parameterType="java.util.List">
insert into news
(	id,
	title,
	content,
	author,
	is_show,
	is_hot,
	sort,
	publish_time
)values<foreach collection="list" item="item" index= "index" separator="," >
(	#{item.id},
	#{item.title},
	#{item.content},
	#{item.author},
	#{item.isShow},
	#{item.isHot},
	#{item.sort},
	#{item.publishTime}
)</foreach>
</insert>
<update id="updateNewsList" parameterType="java.util.List">
<foreach collection="list" item="item" index= "index" separator=";" >
update news
set
	id=#{item.id},
	title=#{item.title},
	content=#{item.content},
	author=#{item.author},
	is_show=#{item.isShow},
	is_hot=#{item.isHot},
	sort=#{item.sort},
	publish_time=#{item.publishTime}

where	
id=#{item.id}	
</foreach>
</update>
<select id="findNewsQuery" resultMap="news">
	select * from news
	<where>
	 <if test="id!=null and id!=''"> 
		AND id=#{id}
	</if>
	 <if test="title!=null and title!=''"> 
		AND title=#{title}
	</if>
	 <if test="content!=null and content!=''"> 
		AND content=#{content}
	</if>
	 <if test="author!=null and author!=''"> 
		AND author=#{author}
	</if>
	 <if test="isShow!=null and isShow!=''"> 
		AND is_show=#{isShow}
	</if>
	 <if test="isHot!=null and isHot!=''"> 
		AND is_hot=#{isHot}
	</if>
	 <if test="sort!=null and sort!=''"> 
		AND sort=#{sort}
	</if>
	 <if test="publishTime!=null and publishTime!=''"> 
		AND publish_time=#{publishTime}
	</if>
</where>
	</select>
<select id="findNewsQueryPage" resultMap="news">
	select * from news
	<where>
	 <if test="id!=null and id!=''"> 
		AND id=#{id}
	</if>
	 <if test="title!=null and title!=''"> 
		AND title=#{title}
	</if>
	 <if test="content!=null and content!=''"> 
		AND content=#{content}
	</if>
	 <if test="author!=null and author!=''"> 
		AND author=#{author}
	</if>
	 <if test="isShow!=null and isShow!=''"> 
		AND is_show=#{isShow}
	</if>
	 <if test="isHot!=null and isHot!=''"> 
		AND is_hot=#{isHot}
	</if>
	 <if test="sort!=null and sort!=''"> 
		AND sort=#{sort}
	</if>
	 <if test="publishTime!=null and publishTime!=''"> 
		AND publish_time=#{publishTime}
	</if>
</where>
		limit #{startIndex},#{limit}

</select>
<select id="findCountNewsQuery" resultType="java.lang.Integer">
	select count(*) from news
	<where>
	 <if test="id!=null and id!=''"> 
		AND id=#{id}
	</if>
	 <if test="title!=null and title!=''"> 
		AND title=#{title}
	</if>
	 <if test="content!=null and content!=''"> 
		AND content=#{content}
	</if>
	 <if test="author!=null and author!=''"> 
		AND author=#{author}
	</if>
	 <if test="isShow!=null and isShow!=''"> 
		AND is_show=#{isShow}
	</if>
	 <if test="isHot!=null and isHot!=''"> 
		AND is_hot=#{isHot}
	</if>
	 <if test="sort!=null and sort!=''"> 
		AND sort=#{sort}
	</if>
	 <if test="publishTime!=null and publishTime!=''"> 
		AND publish_time=#{publishTime}
	</if>
</where>
</select>
</mapper>
